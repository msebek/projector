// Generated by CoffeeScript 1.4.0
/*
TwitterObserver
Ryhan Hassan | ryhanh@me.com
*/(function(){this.TwitterObserver=function(){function e(e,n){u=e;t=n}var t,n,r,i,s,o,u,a;o=0;u="";t=function(){return!1};e.prototype.watch=function(e){e==null&&(e=5e3);this.update();return setInterval(this.update,e)};e.prototype.update=function(){return n(i)};n=function(e){var t,n;t="http://search.twitter.com/search.json?";n="include_entities=true&q="+u+"&callback=?";return $.getJSON(t+n,e)};r=function(e){return(new Date(e)).getTime()};s=function(e){return r(e.created_at)>o};a=function(e){return{user:e.from_user,text:e.text}};i=function(e){var n;n=_.map(_.filter(e.results,s),a);o=_.max(_.map(_.pluck(e.results,"created_at"),r));if(n.length>0)return t(n)};return e}()}).call(this);